(this.webpackJsonpphonebook=this.webpackJsonpphonebook||[]).push([[0],{39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(1),o=n(15),u=n.n(o),a=n(6),i=n(3),s=n(4),l=n.n(s),d="/api/persons",j={all:function(){return l.a.get(d).then((function(e){return e.data}))},create:function(e){return l.a.post(d,e).then((function(e){return e.data}))},remove:function(e){return l.a.delete("".concat(d,"/").concat(e)).then((function(e){return e.data}))},put:function(e,t){return l.a.put("".concat(d,"/").concat(e),t).then((function(e){return e.data}))}},b=function(e){return Object(c.jsx)("button",{onClick:e.action,children:e.text})},h=function(e){var t=e.person,n=e.filter,r=e.action;return t.name.toLowerCase().includes(n.toLowerCase())?Object(c.jsx)("div",{children:Object(c.jsxs)("h3",{children:[t.name,": ",t.number,"  ",Object(c.jsx)(b,{action:r,id:t.id,text:"Delete"})]})}):Object(c.jsx)("div",{})},f=function(e){return Object(c.jsxs)("div",{children:[Object(c.jsx)("h3",{children:"Search contacts"}),"Keyword: ",Object(c.jsx)("input",{value:e.filter,onChange:e.filterHandler})]})},m=function(e){return Object(c.jsxs)("form",{onSubmit:e.submit,children:[Object(c.jsxs)("div",{children:[Object(c.jsx)("h2",{children:"Add a contact"}),"Name: ",Object(c.jsx)("input",{value:e.nameValue,onChange:e.handleName})]}),Object(c.jsxs)("div",{children:["Number: ",Object(c.jsx)("input",{value:e.numberValue,onChange:e.handleNumber})]}),Object(c.jsx)("div",{children:Object(c.jsx)("button",{type:"submit",children:"Add"})})]})},O=function(e){var t=e.msg;return t?t.toLowerCase().includes("error")?Object(c.jsx)("div",{className:"errorMsg",children:Object(c.jsx)("h2",{children:t})}):Object(c.jsx)("div",{className:"statusMsg",children:Object(c.jsx)("h2",{children:t})}):null},x=function(){var e=Object(r.useState)([]),t=Object(i.a)(e,2),n=t[0],o=t[1],u=Object(r.useState)(""),s=Object(i.a)(u,2),l=s[0],d=s[1],b=Object(r.useState)(""),x=Object(i.a)(b,2),p=x[0],v=x[1],g=Object(r.useState)(""),w=Object(i.a)(g,2),C=w[0],N=w[1],S=Object(r.useState)(null),k=Object(i.a)(S,2),y=k[0],L=k[1];function D(e,t){L(t?"Error: ".concat(e.error):e),setTimeout((function(){L(null)}),4e3)}return Object(r.useEffect)((function(){j.all().then((function(e){o(e)})).catch((function(e){return D(e.response.data,e)}))}),[]),Object(c.jsxs)("div",{children:[Object(c.jsx)("h1",{children:"Phonebook"}),Object(c.jsx)(O,{msg:y}),Object(c.jsx)(f,{value:C,filterHandler:function(e){return N(e.target.value)}}),Object(c.jsx)(m,{submit:function(e){e.preventDefault();var t={name:l,number:p},c=n.filter((function(e){return e.name.toLowerCase()===l.toLowerCase()})),r=c[0];if(c.length){if(window.confirm("".concat(l," is already in phonebook. Do you want to update the number?"))){var u=Object(a.a)(Object(a.a)({},c[0]),{},{number:p});console.log(r,u),j.put(u.id,u).then((function(e){o(n.map((function(t){return t.id!==u.id?t:e})))})).catch((function(e){return D(e.response.data,e)})),D("".concat(l," updated!"),null)}}else j.create(t).then((function(e){o(n.concat(e)),console.log("added name:",l,"and number:",p)})).catch((function(e){return D(e.response.data,1)})),D("Successfully added ".concat(l),null);d(""),v("")},nameValue:l,handleName:function(e){return d(e.target.value)},numberValue:p,handleNumber:function(e){return v(e.target.value)}}),Object(c.jsx)("h2",{children:"Numbers"}),n.map((function(e){return Object(c.jsx)("div",{children:Object(c.jsx)(h,{person:e,filter:C,action:function(){return function(e){console.log("About to remove item nb",e.id),window.confirm("Deleting ".concat(e.name," from your phonebook."))&&(j.remove(e.id).then((function(e){return console.log(e)})).catch((function(e){return D(e.response.data,e)})),o(n.filter((function(t){return t.id!==e.id}))),D("Successfully deleted ".concat(e.name),null))}(e)}})},e.name)}))]})};n(39);u.a.render(Object(c.jsx)(x,{}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.9fd087f5.chunk.js.map